{% from 'compontents/page_header.jinja2' import page_header %}
{% from 'compontents/page_sidebar.jinja2' import sidebar %}
{% from 'compontents/page_footer.jinja2' import page_footer %}

{% set render_context = request.GET.render | default('all') %}
{% set render = render | default(render_context) %}


{% if render == 'all' %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <title>Brasil que o Povo Quer!</title>

  {% block css %}
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Open+Sans+Condensed:300|Material+Icons|Raleway|Lato|IBM+Plex+Mono" rel="stylesheet">
    <link href="https://unpkg.com/unpoly@0.54.0/dist/unpoly.min.css" rel="stylesheet" integrity="sha384-zsXMcPyhYSZEF/yA0Rprx9nn7gnz84QyiSrxSH5xuo0DalUAlfSmfsxILtkg5fJ/" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/introjs.min.css" rel="stylesheet">
    <link href="/static/css/main.css" rel="stylesheet">
  {% endblock %}

  {% block javascript %}
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Required by Bootstrap v4 Alpha 4 -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous" defer></script>
    <script src="https://unpkg.com/unpoly@0.54.0/dist/unpoly.min.js" integrity="sha384-6QMkTrFSjoO7UIWKZ1oYV4FCzxclb0Q4gP+TJzTZB93bAUeffVvNLblrRevbIkIw" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" crossorigin="anonymous" defer></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" crossorigin="anonymous" defer></script>
    <script src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.10" defer></script>
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/intro.min.js" defer></script>
    <script src="/static/js/main.js" defer></script>
  {% endblock javascript %}

  <link rel="icon" type="image/x-icon" href="/static/favicon.ico"/>

  <!-- Generic and PWA -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="{{ theme_color|default('#317EFB') }}">
  <link rel="manifest" href="/static/manifest.json">

  <!-- Cache busting metas -->
  <meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="pragma" content="no-cache">

  <!-- Search Engine -->
  <meta name="image" content="/static/img/logo.svg">

  <!-- Schema.org for Google -->
  <meta itemprop="name" content="Brasil que o Povo Quer!">
  <meta itemprop="image" content="/static/img/logo.svg">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Brasil que o Povo Quer!">

  <!-- Open Graph general (Facebook, Pinterest & Google+) -->
  <meta property="og:title" content="Brasil que o Povo Quer!">
  <meta property="og:image" content="/static/img/logo-facebook.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://brasilqueopovoquer.org.br">
  <meta property="og:site_name" content="Brasil que o Povo Quer!">
  <meta property="og:locale" content="pt_BR">
  <meta property="og:type" content="website">
  <meta property="fb:app_id" content="1757744567588794">
</head>

<body class="Page">
{% endif %}

{% block body %}
{% if render == 'all' or render == 'page' %}
  {{ page_header() }}

  <div class="ContentArea">
    {{ sidebar() }}
    <div class="ContentArea-main">
{% endif %}

{# MAIN BLOCK #}
{% block main %}
<main>
  <div class="Page-title"><h1>{{ content_title }}</h1></div>
  <article class="Page-content">
    {% block content %}
      <p>Please override the "content" block of your template!</p>
    {% endblock %}
  </article>
</main>
{% endblock %}

{% if render == 'all' or render == 'page' %}
      {{ page_footer() }}
    </div>
  </div>
{% endif %}
{% endblock %}

{% if render == 'all' %}
{% block modal %}{% endblock modal %}

{% block javascript_body %}
<!-- Google Analytics -->
<script defer>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-104880284-1', 'auto');
</script>

<!-- Service worker -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function () {
      navigator.serviceWorker.register('/static/js/serviceworker.js');
    });
  }
</script>
{% endblock %}
</body>

</html>
{% endif %}
